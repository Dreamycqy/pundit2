<div class="pnd-annotation-details">
    <div 
        class="pnd-annotation-details-header pnd-annotation-details-top" 
        ng-show="!annotation.expanded"
        ng-click="toggleAnnotation()">
        <div class="{{annotation.mainItem.class}}">
                <span class="{{annotation.mainItem.icon}}"></span>
                <span>{{annotation.mainItem.label}}</span>    
                <button type="button" class="btn btn-primary pull-right">
                    <span class="pnd-icon-chevron-right"></span>
                </button>
        </div>
    </div>

    <div class="pnd-annotation-details-container" ng-show="annotation.expanded">

        <div class="pnd-annotation-details-header">
            <div class="{{annotation.mainItem.class}}">
                <button type="button" class="btn btn-primary" ng-click="metaInfo = !metaInfo">
                    <span class="pnd-icon-exclamation-circle"></span>
                    Meta
                </button>
                <button type="button" class="btn btn-primary">
                    <span class="pnd-icon-mail-forward"></span>
                    Reply
                </button>
                <button type="button" class="btn btn-primary">
                    <span class="pnd-icon-share-square-o"></span>
                    Share
                </button>

                <button 
                    ng-click="toggleAnnotation()" 
                    type="button" class="btn pull-right">
                    <span class="pnd-icon-chevron-down"></span>
                </button>
            </div>
        </div>

        <div class="pnd-annotation-details-info" ng-show="metaInfo">
            <div class="pnd-annotation-details-info-author">
                Author: {{annotation.creatorName}}
            </div>
            <div class="pnd-annotation-details-info-date">
                Date: {{annotation.created | date : 'MMM d, y H:mm a'}}
            </div>       
            <div class="pnd-annotation-details-info-notebook">
                Notebook: 
                <a href="{{askLink}}{{annotation.notebookId}}" target="_blank">
                    {{notebookName}}
                </a>
            </div>       
        </div>

        <div class="pnd-annotation-details-content">
            <div class="pnd-annotation-detains-item" ng-repeat="item in annotation.itemsArray">
                <div 
                    class="pnd-annotation-details-subject" 
                    ng-click="subInfo = !subInfo" 
                    ng-init="subInfo = false">
                        <div class="pnd-annotation-details-subject-header">
                            <span class="{{item.subject.icon}}"></span>
                            <span ng-bind-html="item.subject.label">
                                {{item.subject.label}}
                            </span> ({{item.subject.typeLabel}})
                            <button type="button" class="btn">
                                <span ng-class="{true:'pnd-icon-chevron-down', false:'pnd-icon-chevron-right'}[subInfo]"></span>
                            </button>
                        </div>

                        <div ng-show="subInfo">
                            <item-preview uri="{{item.subject.uri}}"></item-preview>
                        </div>
                </div>

                <div 
                    class="pnd-annotation-details-predicate" 
                    ng-click="preInfo = !preInfo"
                    ng-init="preInfo = false">
                    <div class="pnd-annotation-details-predicate-header">
                        <span ng-bind-html="item.predicate.label">{{item.predicate.label}}</span>

                        <button type="button" class="btn">
                            <span ng-class="{true:'pnd-icon-chevron-down', false:'pnd-icon-chevron-right'}[preInfo]"></span>
                        </button>
                    </div>

                    <div ng-show="preInfo">
                        <item-preview uri="{{item.predicate.uri}}"></item-preview>
                    </div>
                </div>

                <div ng-repeat="object in item.objects">
                    <div 
                        class="pnd-annotation-details-object" 
                        ng-class="{'pnd-annotation-details-deactive': object.typeClass!='uri'}"
                        ng-click="objInfo = toggleObjectInfo(object.typeClass, objInfo)"
                        ng-init="objInfo = false">
                            <div class="pnd-annotation-details-object-header">
                                <span class="{{object.icon}}"></span>
                                <span ng-bind-html="object.label">{{object.label}}</span>
                                 ({{object.typeLabel}})
                                <button 
                                    type="button" 
                                    class="btn" 
                                    ng-if="object.typeClass=='uri'">
                                        <span ng-class="{true:'pnd-icon-chevron-down', false:'pnd-icon-chevron-right'}[objInfo]"></span>
                                </button>
                            </div>
                            <div ng-show="objInfo">
                                <item-preview class="pnd-preview clearfix" uri="{{object.uri}}"></item-preview>
                            </div>
                    </div>
                </div>
            </div>    
        </div>

        <div class="pnd-annotation-details-footer" ng-show="isUserToolShowed()">
            <button type="button" class="btn">Edit</button>
            <button type="button" class="btn">Delete</button>
        </div>
    </div>
</div>