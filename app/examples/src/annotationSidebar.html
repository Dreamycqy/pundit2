<!-- buildexamples:section header --><!-- /buildexamples -->

<style>
    .pnd-cons {
        background: #fc0;
    }
</style>

<script type="text/javascript">
    angular.element('body').css('margin-top', '30px');

    var punditConfig = {
            modules: {
                "AnnotationSidebar": { isAnnotationSidebarExpanded: true, debug: true }
            }

        };

    var AnnotationSidebarDemoCtrl = function($scope, $q, AnnotationSidebar, AnnotatorsOrchestrator,
                                             AnnotationsExchange, Consolidation, ItemsExchange,
                                             Annotation) {

        $scope.toogle = function(){
            AnnotationSidebar.toggle();
        };

        // ---

        var uris = AnnotatorsOrchestrator.getAvailableTargets();
        console.log('Available targets', uris);

        var annPromise = AnnotationsExchange.searchByUri(uris);
        annPromise.then(function(ids) {
            console.log('Found '+ids.length+' annotations on the current page.', ids);

            var annPromises = [];
            for (var i=0; i<ids.length; i++) {
                var a = new Annotation(ids[i]);
                annPromises.push(a);
            }
            $q.all(annPromises).then(function(ret) {
                console.log("Retrieved annotations details searching by URIs", ret);
                Consolidation.consolidate(ItemsExchange.getItems());
                $scope.tempannotations = JSON.stringify(ret, null, "  ");
            });

        }, function() {
        // TODO: cant search for annotations? OUCH
        });

        // ---

    }
</script>

<div data-ng-app="Pundit2" class="pnd-wrp" ng-controller="AnnotationSidebarDemoCtrl">
    <annotation-sidebar></annotation-sidebar>

    <div>
        <button type="button" class="btn btn-default" ng-click="toogle()">Annotations</button>
    </div>

    <br />

    <div class="pnd-wrp container clearfix">

    <div class="row">
        <div class="col-sm-6">

            <div class="pundit-content" about="http://fake-url.it/release_bot/build/examples/dante-1.html">
                <h1>Dante Alighieri</h1>
                <div>
                    <p><img src="http://upload.wikimedia.org/wikipedia/commons/a/a4/Dante-alighieri.jpg" height="150" class="pull-left" /><p><b>Durante degli Alighieri</b> (<small>US:&nbsp;</small><span title="Pronunciation in IPA" class="IPA"><a title="Wikipedia:IPA for English">/ˈdɑːnteɪ/</a></span>; <small>UK:&nbsp;</small><span title="Pronunciation in IPA"><a title="Wikipedia:IPA for English">/ˈdænti/</a></span>; 1265–1321), commonly known as <b>Dante</b>, was a major Italian poet of the <a title="Middle Ages">Middle Ages</a>. His <i><a title="Divine Comedy">Divine Comedy</a></i>, originally called <i><span>Commedia</span></i> and later called <i><span lang="it" xml:lang="it">Divina</span></i> by <a title="Boccaccio">Boccaccio</a>, is considered the greatest literary work composed in the <a title="Italian language">Italian language</a> and a masterpiece of world <a title="Literature">literature</a>.<sup><a><span>[</span>1<span>]</span></a></sup></p>
                    <p>&nbsp;</p>
                </div>
                </br></br></br>
            </div>

        </div>
        <div class="col-sm-6">
            <pre>Annotations: {{tempannotations}}</pre>
        </div>

    </div>

    <div class="row">
        <div class="col-sm-3">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi vel pulvinar nulla, eget cursus nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In hac habitasse platea dictumst. Etiam at tortor vel nunc mollis auctor. Vestibulum ac vestibulum massa. Fusce imperdiet est et laoreet feugiat. Nullam tincidunt adipiscing convallis. Vivamus rhoncus odio purus, at pulvinar est suscipit eget. Vivamus rhoncus, lectus id cursus auctor, tellus erat varius tortor, eu imperdiet diam ipsum sed ligula. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aenean faucibus mauris ac elit egestas egestas. Donec ullamcorper nunc nec nibh vulputate aliquam. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Cras a pellentesque risus, a interdum magna. Maecenas vestibulum nibh lorem, nec auctor sapien sodales quis.
            Morbi ac malesuada magna. Morbi ut ullamcorper enim, sit amet suscipit turpis. Curabitur at felis venenatis, convallis diam in, consectetur velit. In et auctor quam. Aenean consequat diam ac nisl dapibus, at bibendum dui vestibulum. Nam at purus at justo consectetur sagittis in ac ligula. Praesent vitae eros pharetra, vehicula arcu a, eleifend leo. Phasellus malesuada egestas elit, sit amet viverra dolor tristique ut. Nulla bibendum aliquam est et fringilla. Integer placerat metus vitae leo tempor imperdiet.
            Aenean tellus turpis, congue ut faucibus non, volutpat vel arcu. Mauris pretium tempus sollicitudin. Vivamus ornare nisi ut eros faucibus mollis. Maecenas a laoreet elit, et sodales ipsum. Duis vel diam risus. Praesent vitae tellus nulla. Etiam viverra adipiscing egestas. Morbi risus purus, sollicitudin feugiat risus nec, dictum hendrerit neque. Nulla accumsan sapien in tortor viverra venenatis in a erat. Fusce a adipiscing odio. Etiam vehicula id nunc eu eleifend. Fusce turpis lectus, facilisis nec mollis at, elementum eget nibh.
            Cras malesuada mollis magna vel tincidunt. Fusce turpis arcu, scelerisque in bibendum non, tincidunt a eros. Nullam eu orci tortor. Donec egestas magna arcu, sed suscipit nunc pharetra a. Pellentesque eget fermentum ante. Nullam sem ligula, congue sit amet est ut, iaculis laoreet orci. Aliquam eu tellus ut metus molestie rutrum.
            Proin mollis augue mauris, sed aliquet eros vestibulum in. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Maecenas vehicula elit ut quam sollicitudin, sit amet vehicula elit mattis. Sed eu ipsum eu turpis tempus cursus. Phasellus sapien ipsum, fermentum sit amet erat tempor, tristique cursus nunc. Duis vulputate elementum iaculis. Donec et leo enim. Morbi viverra elit nec aliquam tristique. Pellentesque at lectus ullamcorper, fringilla dui vel, pretium orci. Fusce congue leo ut diam egestas, non mollis mi sagittis. Nulla facilisi. Nunc ac luctus eros, non vestibulum tortor. Vestibulum placerat eleifend purus facilisis vestibulum.
        </div>
    </div>

</div>

<!-- buildexamples:section footer --><!-- /buildexamples -->