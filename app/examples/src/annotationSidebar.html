<!-- buildexamples:section header --><!-- /buildexamples -->

<style>
    .pnd-cons {
        background: #fc0;
    }
</style>

<script type="text/javascript">
    var punditConfig = {
            modules: {
                "AnnotationSidebar": { debug: true }
            }

        };

    var AnnotationSidebarDemoCtrl = function($scope, $q, AnnotationSidebar, AnnotatorsOrchestrator,
                                             AnnotationsExchange, Consolidation, ItemsExchange,
                                             Annotation) {
    
        $scope.toogle = function(){
            AnnotationSidebar.toggle();
        };

        // ---

        var uris = AnnotatorsOrchestrator.getAvailableTargets();
        console.log('Available targets', uris);

        var annPromise = AnnotationsExchange.searchByUri(uris);
        annPromise.then(function(ids) {
            console.log('Found '+ids.length+' annotations on the current page.', ids);

            var annPromises = [];
            for (var i=0; i<ids.length; i++) {
                var a = new Annotation(ids[i]);
                annPromises.push(a);
            }
            $q.all(annPromises).then(function(ret) {
                console.log("Retrieved annotations details searching by URIs", ret);
                Consolidation.consolidate(ItemsExchange.getItems());
                $scope.annotations = JSON.stringify(ret);
            });

        }, function() {
        // TODO: cant search for annotations? OUCH
        });

        // ---

    }
</script>

<div data-ng-app="Pundit2" class="pnd-wrp" ng-controller="AnnotationSidebarDemoCtrl">
    <annotation-sidebar></annotation-sidebar>

    <div>
        <button type="button" class="btn btn-default" ng-click="toogle()">Annotations</button>
    </div>

    <br />

    <div class="pnd-wrp container clearfix">

    <div class="row">
        <div class="col-sm-6">

            <div class="pundit-content" about="http://fake-url.it/release_bot/build/examples/dante-1.html">
                <h1>Dante Alighieri</h1>
                <div>
                    <p><img src="http://upload.wikimedia.org/wikipedia/commons/a/a4/Dante-alighieri.jpg" height="150" class="pull-left" /><p><b>Durante degli Alighieri</b> (<small>US:&nbsp;</small><span title="Pronunciation in IPA" class="IPA"><a title="Wikipedia:IPA for English">/ˈdɑːnteɪ/</a></span>; <small>UK:&nbsp;</small><span title="Pronunciation in IPA"><a title="Wikipedia:IPA for English">/ˈdænti/</a></span>; 1265–1321), commonly known as <b>Dante</b>, was a major Italian poet of the <a title="Middle Ages">Middle Ages</a>. His <i><a title="Divine Comedy">Divine Comedy</a></i>, originally called <i><span>Commedia</span></i> and later called <i><span lang="it" xml:lang="it">Divina</span></i> by <a title="Boccaccio">Boccaccio</a>, is considered the greatest literary work composed in the <a title="Italian language">Italian language</a> and a masterpiece of world <a title="Literature">literature</a>.<sup><a><span>[</span>1<span>]</span></a></sup></p>
                    <p>&nbsp;</p>
                </div>
                </br></br></br>
            </div>

        </div>
        <!-- <div class="col-sm-6">
            Annotations: {{annotations}}
        </div> -->

    </div>
</div>

<!-- buildexamples:section footer --><!-- /buildexamples -->